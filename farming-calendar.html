<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farming Calendar - KrishiSetu</title>
    <meta name="theme-color" content="#4CAF50">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="farming-calendar-container">
        <!-- Header -->
        <div class="calendar-header">
            <h2 data-translate="farmingCalendar">Personalized Farming Calendar</h2>
            <p data-translate="calendarDesc">AI-generated farming schedule based on your location, weather, and crop types</p>
        </div>

        <!-- Calendar View Selector -->
        <div class="calendar-controls">
            <div class="view-selector">
                <button class="view-btn active" onclick="showView('monthly')">
                    <i class="fas fa-calendar-alt"></i>
                    <span data-translate="monthly">Monthly</span>
                </button>
                <button class="view-btn" onclick="showView('seasonal')">
                    <i class="fas fa-leaf"></i>
                    <span data-translate="seasonal">Seasonal</span>
                </button>
                <button class="view-btn" onclick="showView('weather-based')">
                    <i class="fas fa-cloud-sun"></i>
                    <span data-translate="weatherBased">Weather-Based</span>
                </button>
            </div>
            <div class="calendar-actions">
                <button class="btn btn-primary" onclick="generatePersonalizedCalendar()">
                    <i class="fas fa-magic"></i>
                    <span data-translate="generateCalendar">Generate Calendar</span>
                </button>
            </div>
        </div>

        <!-- Monthly Calendar View -->
        <div id="monthlyView" class="calendar-view active">
            <div class="month-selector">
                <button class="month-nav" onclick="previousMonth()">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <h3 id="currentMonth">September 2024</h3>
                <button class="month-nav" onclick="nextMonth()">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>

            <div class="calendar-grid">
                <div class="calendar-day-header">Sun</div>
                <div class="calendar-day-header">Mon</div>
                <div class="calendar-day-header">Tue</div>
                <div class="calendar-day-header">Wed</div>
                <div class="calendar-day-header">Thu</div>
                <div class="calendar-day-header">Fri</div>
                <div class="calendar-day-header">Sat</div>

                <!-- Calendar days will be populated by JavaScript -->
            </div>

            <div class="monthly-tasks">
                <h4 data-translate="thisMonthTasks">This Month's Tasks</h4>
                <div class="task-list">
                    <div class="task-item priority-high">
                        <div class="task-date">Sep 15-20</div>
                        <div class="task-content">
                            <div class="task-icon">
                                <i class="fas fa-seedling"></i>
                            </div>
                            <div class="task-details">
                                <h5 data-translate="plantWinterCrops">Plant Winter Crops</h5>
                                <p data-translate="plantWinterDesc">Optimal time for planting wheat, barley, and mustard seeds based on weather forecast</p>
                                <div class="task-crops">
                                    <span class="crop-tag">üåæ Wheat</span>
                                    <span class="crop-tag">üåæ Barley</span>
                                    <span class="crop-tag">üåª Mustard</span>
                                </div>
                            </div>
                        </div>
                        <button class="task-action" onclick="markTaskComplete(this)">
                            <i class="fas fa-check"></i>
                        </button>
                    </div>

                    <div class="task-item priority-medium">
                        <div class="task-date">Sep 10-12</div>
                        <div class="task-content">
                            <div class="task-icon">
                                <i class="fas fa-tint"></i>
                            </div>
                            <div class="task-details">
                                <h5 data-translate="irrigationMgmt">Irrigation Management</h5>
                                <p data-translate="irrigationDesc">Adjust irrigation schedule for existing crops before monsoon season</p>
                            </div>
                        </div>
                        <button class="task-action" onclick="markTaskComplete(this)">
                            <i class="fas fa-check"></i>
                        </button>
                    </div>

                    <div class="task-item priority-low">
                        <div class="task-date">Sep 25-30</div>
                        <div class="task-content">
                            <div class="task-icon">
                                <i class="fas fa-leaf"></i>
                            </div>
                            <div class="task-details">
                                <h5 data-translate="fertilizeApplication">Fertilizer Application</h5>
                                <p data-translate="fertilizeDesc">Apply organic fertilizer to prepare soil for winter crop season</p>
                            </div>
                        </div>
                        <button class="task-action" onclick="markTaskComplete(this)">
                            <i class="fas fa-check"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Seasonal Calendar View -->
        <div id="seasonalView" class="calendar-view">
            <div class="seasons-grid">
                <div class="season-card winter">
                    <div class="season-header">
                        <i class="fas fa-snowflake"></i>
                        <h3 data-translate="winter">Winter (Rabi)</h3>
                        <span class="season-months">Oct - Mar</span>
                    </div>
                    <div class="season-crops">
                        <h4 data-translate="recommendedCrops">Recommended Crops</h4>
                        <div class="crop-grid">
                            <div class="crop-item">
                                <span class="crop-emoji">üåæ</span>
                                <span>Wheat</span>
                            </div>
                            <div class="crop-item">
                                <span class="crop-emoji">üåæ</span>
                                <span>Barley</span>
                            </div>
                            <div class="crop-item">
                                <span class="crop-emoji">ü•î</span>
                                <span>Potato</span>
                            </div>
                            <div class="crop-item">
                                <span class="crop-emoji">üåª</span>
                                <span>Mustard</span>
                            </div>
                        </div>
                    </div>
                    <div class="season-activities">
                        <h4 data-translate="keyActivities">Key Activities</h4>
                        <ul>
                            <li>Field preparation in October</li>
                            <li>Sowing from November</li>
                            <li>Irrigation management</li>
                            <li>Harvest in March-April</li>
                        </ul>
                    </div>
                </div>

                <div class="season-card summer">
                    <div class="season-header">
                        <i class="fas fa-sun"></i>
                        <h3 data-translate="summer">Summer (Zaid)</h3>
                        <span class="season-months">Apr - Jun</span>
                    </div>
                    <div class="season-crops">
                        <h4 data-translate="recommendedCrops">Recommended Crops</h4>
                        <div class="crop-grid">
                            <div class="crop-item">
                                <span class="crop-emoji">üåΩ</span>
                                <span>Corn</span>
                            </div>
                            <div class="crop-item">
                                <span class="crop-emoji">üçÖ</span>
                                <span>Tomato</span>
                            </div>
                            <div class="crop-item">
                                <span class="crop-emoji">ü•í</span>
                                <span>Cucumber</span>
                            </div>
                            <div class="crop-item">
                                <span class="crop-emoji">üå∂Ô∏è</span>
                                <span>Chili</span>
                            </div>
                        </div>
                    </div>
                    <div class="season-activities">
                        <h4 data-translate="keyActivities">Key Activities</h4>
                        <ul>
                            <li>Intensive irrigation needed</li>
                            <li>Pest and disease control</li>
                            <li>Regular monitoring</li>
                            <li>Quick harvest cycle</li>
                        </ul>
                    </div>
                </div>

                <div class="season-card monsoon">
                    <div class="season-header">
                        <i class="fas fa-cloud-rain"></i>
                        <h3 data-translate="monsoon">Monsoon (Kharif)</h3>
                        <span class="season-months">Jul - Oct</span>
                    </div>
                    <div class="season-crops">
                        <h4 data-translate="recommendedCrops">Recommended Crops</h4>
                        <div class="crop-grid">
                            <div class="crop-item">
                                <span class="crop-emoji">üåæ</span>
                                <span>Rice</span>
                            </div>
                            <div class="crop-item">
                                <span class="crop-emoji">üåΩ</span>
                                <span>Maize</span>
                            </div>
                            <div class="crop-item">
                                <span class="crop-emoji">üåø</span>
                                <span>Cotton</span>
                            </div>
                            <div class="crop-item">
                                <span class="crop-emoji">üå±</span>
                                <span>Sugarcane</span>
                            </div>
                        </div>
                    </div>
                    <div class="season-activities">
                        <h4 data-translate="keyActivities">Key Activities</h4>
                        <ul>
                            <li>Take advantage of rainfall</li>
                            <li>Monitor water logging</li>
                            <li>Disease prevention</li>
                            <li>Proper drainage management</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Weather-Based Calendar View -->
        <div id="weatherBasedView" class="calendar-view">
            <div class="weather-calendar">
                <h3 data-translate="weatherBasedSchedule">Weather-Based Task Schedule</h3>
                <div class="weather-tasks">
                    <div class="weather-task-card sunny">
                        <div class="weather-condition">
                            <i class="fas fa-sun"></i>
                            <span data-translate="sunnyDays">Sunny Days</span>
                        </div>
                        <div class="weather-task-list">
                            <div class="weather-task">
                                <i class="fas fa-seedling"></i>
                                <span>Plant drought-resistant crops</span>
                            </div>
                            <div class="weather-task">
                                <i class="fas fa-cut"></i>
                                <span>Harvest mature crops</span>
                            </div>
                            <div class="weather-task">
                                <i class="fas fa-spray-can"></i>
                                <span>Apply pesticides and fertilizers</span>
                            </div>
                        </div>
                    </div>

                    <div class="weather-task-card rainy">
                        <div class="weather-condition">
                            <i class="fas fa-cloud-rain"></i>
                            <span data-translate="rainyDays">Rainy Days</span>
                        </div>
                        <div class="weather-task-list">
                            <div class="weather-task">
                                <i class="fas fa-seedling"></i>
                                <span>Plant water-loving crops</span>
                            </div>
                            <div class="weather-task">
                                <i class="fas fa-home"></i>
                                <span>Indoor maintenance tasks</span>
                            </div>
                            <div class="weather-task">
                                <i class="fas fa-water"></i>
                                <span>Check drainage systems</span>
                            </div>
                        </div>
                    </div>

                    <div class="weather-task-card cloudy">
                        <div class="weather-condition">
                            <i class="fas fa-cloud"></i>
                            <span data-translate="cloudyDays">Cloudy Days</span>
                        </div>
                        <div class="weather-task-list">
                            <div class="weather-task">
                                <i class="fas fa-tint"></i>
                                <span>Optimal irrigation timing</span>
                            </div>
                            <div class="weather-task">
                                <i class="fas fa-tools"></i>
                                <span>Equipment maintenance</span>
                            </div>
                            <div class="weather-task">
                                <i class="fas fa-eye"></i>
                                <span>Field inspection and monitoring</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- By-Product Income Maximizer -->
        <div class="byproduct-section">
            <h3 data-translate="byProductIncome">By-Product Income Maximizer</h3>
            <p data-translate="byProductDesc">Turn your crop waste into additional income streams</p>
            
            <div class="byproduct-grid">
                <div class="byproduct-card">
                    <div class="byproduct-header">
                        <div class="byproduct-icon">üåæ</div>
                        <h4>Wheat Straw</h4>
                    </div>
                    <div class="byproduct-uses">
                        <h5 data-translate="potentialUses">Potential Uses:</h5>
                        <ul>
                            <li><i class="fas fa-industry"></i> Paper Industry</li>
                            <li><i class="fas fa-fire"></i> Biofuel Production</li>
                            <li><i class="fas fa-cow"></i> Animal Feed</li>
                            <li><i class="fas fa-home"></i> Construction Material</li>
                        </ul>
                    </div>
                    <div class="byproduct-income">
                        <div class="income-amount">‚Çπ2,000 - ‚Çπ3,000</div>
                        <div class="income-unit">per ton</div>
                    </div>
                    <button class="btn btn-secondary" onclick="findBuyers('wheat-straw')">
                        <i class="fas fa-search"></i>
                        <span data-translate="findBuyers">Find Buyers</span>
                    </button>
                </div>

                <div class="byproduct-card">
                    <div class="byproduct-header">
                        <div class="byproduct-icon">üåæ</div>
                        <h4>Rice Husk</h4>
                    </div>
                    <div class="byproduct-uses">
                        <h5 data-translate="potentialUses">Potential Uses:</h5>
                        <ul>
                            <li><i class="fas fa-building"></i> Construction Material</li>
                            <li><i class="fas fa-fire"></i> Biofuel</li>
                            <li><i class="fas fa-seedling"></i> Organic Fertilizer</li>
                            <li><i class="fas fa-flask"></i> Silicon Extraction</li>
                        </ul>
                    </div>
                    <div class="byproduct-income">
                        <div class="income-amount">‚Çπ1,500 - ‚Çπ2,500</div>
                        <div class="income-unit">per ton</div>
                    </div>
                    <button class="btn btn-secondary" onclick="findBuyers('rice-husk')">
                        <i class="fas fa-search"></i>
                        <span data-translate="findBuyers">Find Buyers</span>
                    </button>
                </div>

                <div class="byproduct-card">
                    <div class="byproduct-header">
                        <div class="byproduct-icon">üå±</div>
                        <h4>Sugarcane Bagasse</h4>
                    </div>
                    <div class="byproduct-uses">
                        <h5 data-translate="potentialUses">Potential Uses:</h5>
                        <ul>
                            <li><i class="fas fa-scroll"></i> Paper Production</li>
                            <li><i class="fas fa-bolt"></i> Power Generation</li>
                            <li><i class="fas fa-home"></i> Building Material</li>
                            <li><i class="fas fa-wine-bottle"></i> Ethanol Production</li>
                        </ul>
                    </div>
                    <div class="byproduct-income">
                        <div class="income-amount">‚Çπ3,000 - ‚Çπ4,000</div>
                        <div class="income-unit">per ton</div>
                    </div>
                    <button class="btn btn-secondary" onclick="findBuyers('bagasse')">
                        <i class="fas fa-search"></i>
                        <span data-translate="findBuyers">Find Buyers</span>
                    </button>
                </div>

                <div class="byproduct-card">
                    <div class="byproduct-header">
                        <div class="byproduct-icon">üêÑ</div>
                        <h4>Cow Dung</h4>
                    </div>
                    <div class="byproduct-uses">
                        <h5 data-translate="potentialUses">Potential Uses:</h5>
                        <ul>
                            <li><i class="fas fa-seedling"></i> Organic Fertilizer</li>
                            <li><i class="fas fa-fire"></i> Biogas Production</li>
                            <li><i class="fas fa-cube"></i> Vermicompost</li>
                            <li><i class="fas fa-leaf"></i> Natural Pesticide</li>
                        </ul>
                    </div>
                    <div class="byproduct-income">
                        <div class="income-amount">‚Çπ1,000 - ‚Çπ1,500</div>
                        <div class="income-unit">per ton</div>
                    </div>
                    <button class="btn btn-secondary" onclick="findBuyers('cow-dung')">
                        <i class="fas fa-search"></i>
                        <span data-translate="findBuyers">Find Buyers</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Income Calculator -->
        <div class="income-calculator">
            <h3 data-translate="incomeCalculator">By-Product Income Calculator</h3>
            <div class="calculator-form">
                <div class="form-group">
                    <label data-translate="selectByProduct">Select By-Product:</label>
                    <select id="byProductSelect">
                        <option value="wheat-straw">Wheat Straw</option>
                        <option value="rice-husk">Rice Husk</option>
                        <option value="bagasse">Sugarcane Bagasse</option>
                        <option value="cow-dung">Cow Dung</option>
                    </select>
                </div>
                <div class="form-group">
                    <label data-translate="estimatedQuantity">Estimated Quantity (tons):</label>
                    <input type="number" id="quantityInput" min="0" step="0.1" placeholder="Enter quantity">
                </div>
                <button class="btn btn-primary" onclick="calculateIncome()">
                    <i class="fas fa-calculator"></i>
                    <span data-translate="calculateIncome">Calculate Income</span>
                </button>
            </div>
            <div id="incomeResult" class="income-result" style="display: none;"></div>
        </div>
    </div>

    <script src="translations.js"></script>
    <script>
        // Calendar functionality
        let currentDate = new Date();
        let currentView = 'monthly';

        document.addEventListener('DOMContentLoaded', function() {
            generateMonthlyCalendar();
        });

        function showView(viewName) {
            // Hide all views
            document.querySelectorAll('.calendar-view').forEach(view => {
                view.classList.remove('active');
            });
            
            // Remove active class from buttons
            document.querySelectorAll('.view-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected view
            document.getElementById(viewName + 'View').classList.add('active');
            event.target.closest('.view-btn').classList.add('active');
            
            currentView = viewName;
        }

        function generateMonthlyCalendar() {
            const calendarGrid = document.querySelector('.calendar-grid');
            const monthName = document.getElementById('currentMonth');
            
            // Clear existing calendar days
            const existingDays = calendarGrid.querySelectorAll('.calendar-day');
            existingDays.forEach(day => day.remove());
            
            // Set month name
            const months = ['January', 'February', 'March', 'April', 'May', 'June',
                           'July', 'August', 'September', 'October', 'November', 'December'];
            monthName.textContent = `${months[currentDate.getMonth()]} ${currentDate.getFullYear()}`;
            
            // Generate calendar days
            const firstDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
            const lastDay = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);
            const startDate = new Date(firstDay);
            startDate.setDate(startDate.getDate() - firstDay.getDay());
            
            for (let i = 0; i < 42; i++) {
                const day = new Date(startDate);
                day.setDate(startDate.getDate() + i);
                
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                
                if (day.getMonth() !== currentDate.getMonth()) {
                    dayElement.classList.add('other-month');
                }
                
                if (day.toDateString() === new Date().toDateString()) {
                    dayElement.classList.add('today');
                }
                
                dayElement.innerHTML = `
                    <span class="day-number">${day.getDate()}</span>
                    <div class="day-tasks"></div>
                `;
                
                calendarGrid.appendChild(dayElement);
            }
        }

        function previousMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            generateMonthlyCalendar();
        }

        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            generateMonthlyCalendar();
        }

        function generatePersonalizedCalendar() {
            alert('Generating personalized calendar based on your location, weather forecast, and crop selection...');
            // Simulate calendar generation
            setTimeout(() => {
                alert('Calendar generated successfully! New tasks have been added based on AI recommendations.');
            }, 2000);
        }

        function markTaskComplete(button) {
            const taskItem = button.closest('.task-item');
            taskItem.classList.add('completed');
            button.innerHTML = '<i class="fas fa-check"></i> Completed';
            button.disabled = true;
        }

        function findBuyers(productType) {
            const buyersData = {
                'wheat-straw': ['ABC Paper Mills - ‚Çπ2,500/ton', 'Green Energy Corp - ‚Çπ2,200/ton'],
                'rice-husk': ['Construction Materials Ltd - ‚Çπ2,000/ton', 'Bio-fuel Industries - ‚Çπ1,800/ton'],
                'bagasse': ['Paper Industries Inc - ‚Çπ3,500/ton', 'Power Plant Ltd - ‚Çπ3,200/ton'],
                'cow-dung': ['Organic Fertilizers Co - ‚Çπ1,200/ton', 'Biogas Solutions - ‚Çπ1,000/ton']
            };
            
            const buyers = buyersData[productType] || [];
            const buyersList = buyers.join('\n');
            alert(`Potential Buyers for ${productType}:\n\n${buyersList}\n\nContact details will be provided after verification.`);
        }

        function calculateIncome() {
            const productType = document.getElementById('byProductSelect').value;
            const quantity = parseFloat(document.getElementById('quantityInput').value);
            
            if (!quantity || quantity <= 0) {
                alert('Please enter a valid quantity');
                return;
            }
            
            const priceRanges = {
                'wheat-straw': { min: 2000, max: 3000 },
                'rice-husk': { min: 1500, max: 2500 },
                'bagasse': { min: 3000, max: 4000 },
                'cow-dung': { min: 1000, max: 1500 }
            };
            
            const range = priceRanges[productType];
            const minIncome = quantity * range.min;
            const maxIncome = quantity * range.max;
            
            const resultDiv = document.getElementById('incomeResult');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = `
                <h4>Estimated Income</h4>
                <div class="income-range">
                    <div class="income-min">Minimum: ‚Çπ${minIncome.toLocaleString()}</div>
                    <div class="income-max">Maximum: ‚Çπ${maxIncome.toLocaleString()}</div>
                </div>
                <p>For ${quantity} tons of ${productType.replace('-', ' ')}</p>
            `;
        }
    </script>
</body>
</html>
