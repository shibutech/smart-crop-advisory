<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#4CAF50">
    <title data-i18n="appTitle">Kisan Sathi - Smart Farming Assistant</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material-icons" rel="stylesheet">
</head>
<body>
    <!-- Language Selection Screen (Initially shown) -->
    <div id="languageScreen" class="language-screen">
        <div class="language-content">
            <h1>üåç</h1>
            <h2 data-i18n="selectLanguage">Select Your Language</h2>
            <div class="language-options">
                <button class="language-option" data-lang="en">
                    <span class="flag">üá¨üáß</span>
                    <span>English</span>
                </button>
                <button class="language-option" data-lang="hi">
                    <span class="flag">üáÆüá≥</span>
                    <span>‡§π‡§ø‡§Ç‡§¶‡•Ä (Hindi)</span>
                </button>
                <button class="language-option" data-lang="pa">
                    <span class="flag">üáÆüá≥</span>
                    <span>‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä (Punjabi)</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Main App (Initially hidden) -->
    <div id="app" class="hidden">
        <!-- Header -->
        <header>
            <div class="header-content">
                <div class="logo">
                    <h1 data-i18n="appTitle">Kisan Sathi</h1>
                    <p data-i18n="appTagline">Your Smart Farming Companion</p>
                </div>
                <nav>
                    <ul class="nav-menu">
                        <li><a href="#dashboard" class="active" data-i18n="navDashboard">Dashboard</a></li>
                        <li><a href="#soil-analysis" data-i18n="navSoilAnalysis">Soil Analysis</a></li>
                        <li><a href="#pest-detection" data-i18n="navPestDetection">Pest Detection</a></li>
                        <li><a href="#weather" data-i18n="navWeather">Weather</a></li>
                        <li><a href="#market-prices" data-i18n="navMarket">Market Prices</a></li>
                    </ul>
                </nav>
                <div class="language-selector">
                    <select id="languageSelect">
                        <option value="en">English</option>
                        <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                        <option value="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</option>
                    </select>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main>
            <!-- Dashboard Section -->
            <section id="dashboard" class="section active">
                <div class="container">
                    <h2 data-i18n="dashboardTitle">Farmer Dashboard</h2>
                    
                    <!-- Weather Widget -->
                    <div class="card weather-card">
                        <div class="weather-header">
                            <h3 data-i18n="weatherTitle">Weather Update</h3>
                            <button id="refresh-weather" class="btn-icon">
                                <span class="material-icons">refresh</span>
                                <span data-i18n="refresh">Refresh</span>
                            </button>
                        </div>
                        <div id="weather-widget" class="weather-content">
                            <div class="weather-loading">
                                <div class="spinner"></div>
                                <p data-i18n="loading">Loading weather data...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="quick-actions">
                        <div class="action-card" onclick="showSection('soil-analysis')">
                            <div class="action-icon">
                                <span class="material-icons">grass</span>
                            </div>
                            <h4 data-i18n="soilAnalysis">Soil Analysis</h4>
                            <p data-i18n="soilAnalysisDesc">Get soil health report</p>
                        </div>
                        <div class="action-card" onclick="showSection('pest-detection')">
                            <div class="action-icon">
                                <span class="material-icons">bug_report</span>
                            </div>
                            <h4 data-i18n="pestDetection">Pest Detection</h4>
                            <p data-i18n="pestDetectionDesc">Identify crop diseases</p>
                        </div>
                        <div class="action-card" onclick="showSection('market-prices')">
                            <div class="action-icon">
                                <span class="material-icons">trending_up</span>
                            </div>
                            <h4 data-i18n="marketPrices">Market Prices</h4>
                            <p data-i18n="marketPricesDesc">Check current rates</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Soil Analysis Section -->
            <section id="soil-analysis" class="section">
                <div class="container">
                    <h2 data-i18n="soilAnalysisTitle">Soil Health Analysis</h2>
                    <div class="card">
                        <form id="soil-analysis-form">
                            <div class="form-group">
                                <label for="soil-type" data-i18n="soilType">Soil Type</label>
                                <select id="soil-type" required>
                                    <option value="" data-i18n="selectSoilType">Select Soil Type</option>
                                    <option value="alluvial" data-i18n="soilTypes.alluvial">Alluvial</option>
                                    <option value="black" data-i18n="soilTypes.black">Black (Regur)</option>
                                    <option value="red" data-i18n="soilTypes.red">Red</option>
                                    <option value="laterite" data-i18n="soilTypes.laterite">Laterite</option>
                                    <option value="mountain" data-i18n="soilTypes.mountain">Mountain</option>
                                    <option value="desert" data-i18n="soilTypes.desert">Desert</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="ph-level" data-i18n="phLevel">Soil pH Level</label>
                                <input type="number" id="ph-level" min="0" max="14" step="0.1" placeholder="e.g., 6.5" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="moisture" data-i18n="moistureLevel">Moisture Level</label>
                                <select id="moisture" required>
                                    <option value="" data-i18n="selectMoisture">Select Moisture Level</option>
                                    <option value="dry" data-i18n="moistureLevels.dry">Dry</option>
                                    <option value="moist" data-i18n="moistureLevels.moist">Moist</option>
                                    <option value="wet" data-i18n="moistureLevels.wet">Wet</option>
                                    <option value="waterlogged" data-i18n="moistureLevels.waterlogged">Waterlogged</option>
                                </select>
                            </div>
                            
                            <button type="submit" class="btn btn-primary" data-i18n="analyzeSoil">Analyze Soil</button>
                        </form>
                        
                        <div id="soil-results" class="hidden">
                            <h3 data-i18n="analysisResults">Analysis Results</h3>
                            <div class="result-card">
                                <h4 data-i18n="recommendedFertilizer">Recommended Fertilizer</h4>
                                <p id="fertilizer-recommendation">-</p>
                                
                                <h4 data-i18n="applicationRate">Application Rate</h4>
                                <p id="application-rate">-</p>
                                
                                <h4 data-i18n="additionalTips">Additional Tips</h4>
                                <ul id="soil-tips"></ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Pest Detection Section -->
            <section id="pest-detection" class="section">
                <div class="container">
                    <h2 data-i18n="pestDetectionTitle">Pest & Disease Detection</h2>
                    <div class="card">
                        <div class="upload-area" id="upload-area">
                            <input type="file" id="pest-image-upload" accept="image/*" capture="camera" class="hidden">
                            <div class="upload-content">
                                <span class="material-icons">cloud_upload</span>
                                <h3 data-i18n="uploadImage">Upload Crop Image</h3>
                                <p data-i18n="or">or</p>
                                <button class="btn btn-outline" onclick="document.getElementById('pest-image-upload').click()" data-i18n="takePhoto">Take Photo</button>
                            </div>
                        </div>
                        
                        <div id="analysis-results" class="hidden">
                            <div class="result-header">
                                <h3 data-i18n="detectionResults">Detection Results</h3>
                                <button class="btn-icon" onclick="resetPestDetection()">
                                    <span class="material-icons">refresh</span>
                                    <span data-i18n="analyzeAnother">Analyze Another</span>
                                </button>
                            </div>
                            
                            <div class="result-content">
                                <div class="image-preview">
                                    <img id="pest-image-preview" src="" alt="Uploaded crop">
                                </div>
                                
                                <div class="analysis-details">
                                    <div class="result-item">
                                        <span class="label" data-i18n="pestName">Pest/Disease:</span>
                                        <span id="pest-name" class="value">-</span>
                                    </div>
                                    
                                    <div class="result-item">
                                        <span class="label" data-i18n="confidence">Confidence:</span>
                                        <span id="confidence-level" class="value">-</span>
                                    </div>
                                    
                                    <div class="result-item full-width">
                                        <span class="label" data-i18n="description">Description:</span>
                                        <p id="pest-description">-</p>
                                    </div>
                                    
                                    <div class="result-item full-width">
                                        <span class="label" data-i18n="treatment">Treatment:</span>
                                        <ul id="treatment-steps"></ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Weather Section -->
            <section id="weather" class="section">
                <div class="container">
                    <h2 data-i18n="weatherForecast">Weather Forecast</h2>
                    <div class="card">
                        <div id="weather-container">
                            <div class="weather-current">
                                <div class="weather-location">
                                    <span class="material-icons">location_on</span>
                                    <span id="location-name" data-i18n="fetchingLocation">Fetching location...</span>
                                </div>
                                
                                <div class="weather-main">
                                    <div class="weather-icon">
                                        <span class="material-icons">wb_sunny</span>
                                    </div>
                                    <div class="weather-temp">
                                        <span id="current-temp">-</span>
                                        <span class="temp-unit">¬∞C</span>
                                    </div>
                                    <div class="weather-desc" id="weather-description">-</div>
                                </div>
                                
                                <div class="weather-details">
                                    <div class="detail-item">
                                        <span class="material-icons">opacity</span>
                                        <span class="label" data-i18n="humidity">Humidity:</span>
                                        <span id="humidity">-</span>%
                                    </div>
                                    <div class="detail-item">
                                        <span class="material-icons">air</span>
                                        <span class="label" data-i18n="wind">Wind:</span>
                                        <span id="wind-speed">-</span> km/h
                                    </div>
                                    <div class="detail-item">
                                        <span class="material-icons">compress</span>
                                        <span class="label" data-i18n="pressure">Pressure:</span>
                                        <span id="pressure">-</span> hPa
                                    </div>
                                </div>
                            </div>
                            
                            <div class="weather-forecast" id="weather-forecast">
                                <!-- Forecast items will be added here by JavaScript -->
                            </div>
                            
                            <div class="weather-alerts" id="weather-alerts">
                                <!-- Weather alerts will be added here by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Market Prices Section -->
            <section id="market-prices" class="section">
                <div class="container">
                    <h2 data-i18n="marketPricesTitle">Market Prices</h2>
                    <div class="card">
                        <div class="market-filters">
                            <div class="form-group">
                                <label for="crop-type" data-i18n="selectCrop">Select Crop</label>
                                <select id="crop-type">
                                    <option value="all" data-i18n="allCrops">All Crops</option>
                                    <option value="wheat" data-i18n="crops.wheat">Wheat</option>
                                    <option value="rice" data-i18n="crops.rice">Rice</option>
                                    <option value="maize" data-i18n="crops.maize">Maize</option>
                                    <option value="cotton" data-i18n="crops.cotton">Cotton</option>
                                    <option value="sugarcane" data-i18n="crops.sugarcane">Sugarcane</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="market-location" data-i18n="selectMarket">Select Market</label>
                                <select id="market-location">
                                    <option value="all" data-i18n="allMarkets">All Markets</option>
                                    <option value="delhi" data-i18n="markets.delhi">Delhi</option>
                                    <option value="mumbai" data-i18n="markets.mumbai">Mumbai</option>
                                    <option value="bengaluru" data-i18n="markets.bengaluru">Bengaluru</option>
                                    <option value="hyderabad" data-i18n="markets.hyderabad">Hyderabad</option>
                                </select>
                            </div>
                            
                            <button id="filter-prices" class="btn btn-primary" data-i18n="applyFilters">Apply Filters</button>
                        </div>
                        
                        <div class="price-table-container">
                            <table class="market-table">
                                <thead>
                                    <tr>
                                        <th data-i18n="crop">Crop</th>
                                        <th data-i18n="price">Price (‚Çπ/Quintal)</th>
                                        <th data-i18n="market">Market</th>
                                        <th data-i18n="lastUpdated">Last Updated</th>
                                    </tr>
                                </thead>
                                <tbody id="price-table-body">
                                    <!-- Price data will be loaded here -->
                                    <tr>
                                        <td colspan="4" class="text-center" data-i18n="loading">Loading...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="price-trends">
                            <h3 data-i18n="priceTrends">Price Trends</h3>
                            <div id="price-chart" class="chart-container">
                                <!-- Chart will be rendered here -->
                                <div class="chart-placeholder">
                                    <span class="material-icons">bar_chart</span>
                                    <p data-i18n="chartLoading">Loading price trends...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer>
            <div class="container">
                <div class="footer-content">
                    <div class="footer-section">
                        <h3 data-i18n="quickLinks">Quick Links</h3>
                        <ul>
                            <li><a href="#dashboard" data-i18n="home">Home</a></li>
                            <li><a href="#soil-analysis" data-i18n="soilAnalysis">Soil Analysis</a></li>
                            <li><a href="#pest-detection" data-i18n="pestDetection">Pest Detection</a></li>
                            <li><a href="#weather" data-i18n="weather">Weather</a></li>
                            <li><a href="#market-prices" data-i18n="marketPrices">Market Prices</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-section">
                        <h3 data-i18n="contactUs">Contact Us</h3>
                        <ul>
                            <li><span class="material-icons">email</span> support@kisansathi.com</li>
                            <li><span class="material-icons">phone</span> +91 98765 43210</li>
                            <li><span class="material-icons">location_on</span> New Delhi, India</li>
                        </ul>
                    </div>
                    
                    <div class="footer-section">
                        <h3 data-i18n="followUs">Follow Us</h3>
                        <div class="social-links">
                            <a href="#" class="social-icon"><span class="material-icons">facebook</span></a>
                            <a href="#" class="social-icon"><span class="material-icons">telegram</span></a>
                            <a href="#" class="social-icon"><span class="material-icons">youtube</span></a>
                            <a href="#" class="social-icon"><span class="material-icons">twitter</span></a>
                        </div>
                        
                        <div class="app-download">
                            <p data-i18n="downloadApp">Download our app</p>
                            <div class="download-buttons">
                                <a href="https://storage.appilix.com/uploads/app-apk-68c70e18f07d2-1757875736.apk" class="btn btn-outline">
                                    <span class="material-icons">Android</span>
                                    <span>Google Play</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="footer-bottom">
                    <p>&copy; <span id="current-year">2024</span> Kisan Sathi. <span data-i18n="allRightsReserved">All rights reserved.</span></p>
                    <div class="footer-links">
                        <a href="#" data-i18n="privacyPolicy">Privacy Policy</a>
                        <span>|</span>
                        <a href="#" data-i18n="termsOfService">Terms of Service</a>
                        <span>|</span>
                        <a href="#" data-i18n="faq">FAQ</a>
                    </div>
                </div>
            </div>
        </footer>

        <!-- Voice Command Button -->
        <button id="voice-command" class="voice-command" aria-label="Voice Command">
            <span class="material-icons">mic</span>
        </button>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/i18next@21.6.10/i18next.min.js"></script>
    <script src="app.js"></script>
    
    <script>
        // Set current year in footer
        document.getElementById('current-year').textContent = new Date().getFullYear();
        
        // Initialize service worker for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }
    </script>
</body>
</html>
